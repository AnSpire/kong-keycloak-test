_format_version: "3.0"

consumers:
  - username: keycloak

jwt_secrets:
  - consumer: keycloak
    algorithm: RS256
    key: http://localhost:8080/realms/demo                # = client_id (из Keycloak)
    rsa_public_key: |
      -----BEGIN PUBLIC KEY-----
      MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAi2xTgWZeiUpVr9BjKTUb3ktEYWM4TQhFQryw4/u4bUlF/1MNOVUXajy8iYKG1020WmpR5NJyVkhCZfhjdYcR6UAraNBjTPA9x1ZPi6x3CaHcuSoDJe5DiFfIuNapxGmv+fIu17BkZUHbb+9rofl/rPxsHuL0/WhdDYFU7bevYsonbgDbOdYVPgoH0799YaWQaasQgQecRkAQabB9eAKDLgThHBdFIjRk44kSjN6IFueLNSTOUiUSmxaNr8sQPEqcB0vYDM+MzLWqqsL8qQRbmz2LP/hB7WuqzKPgyaiTeFvtvi0iUaOu64U2hGpSBY7O++Rj82usfl9R2WxfK/gO9QIDAQAB
      -----END PUBLIC KEY-----

services:
  - name: items-service
    url: http://items-service:80
    routes:
      - name: items-route
        paths:
          - /items
        strip_path: false

  - name: orders-service
    url: http://orders-service:80
    routes:
      - name: orders-route
        paths:
          - /orders
        strip_path: false
  - name: users-service
    url: http://users-service:80
    routes:
      - name: users-route
        paths:
          - /users
        strip_path: false
    plugins:
      - name: jwt
